<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServiceNow API Explorer - IT Info Center</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/components.css">
    <link rel="stylesheet" href="../../styles/pages/snow.css">
</head>
<body>
    <header>
        <h1>ASICS IT Info Center</h1>
        <nav class="navbar">
            <ul>
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../snpa.html">ServiceNow & PowerAutomate</a></li>
                <li><a href="../../IT-Tasks/it-tasks.html">IT Tasks</a></li>
                <li><a href="../../Troubleshooting/troubleshooting.html">Troubleshooting</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="page-header">
            <h2>ServiceNow API Explorer</h2>
            <p>Explore and test ServiceNow REST APIs for data retrieval, incident management, and system integration</p>
        </section>

        <div class="api-container">
            <div class="api-section">
                <h3>API Endpoints</h3>
                <div class="api-endpoints">
                    <div class="api-endpoint">
                        <h4>üìã Incidents</h4>
                        <p><strong>GET:</strong> /api/now/table/incident</p>
                        <p><strong>Description:</strong> Retrieve all incidents or filter by criteria</p>
                        <button class="btn-primary" onclick="fetchIncidents()">Load Incidents</button>
                        <div id="incident-results" class="api-results"></div>
                    </div>

                    <div class="api-endpoint">
                        <h4>üë§ Users</h4>
                        <p><strong>GET:</strong> /api/now/table/sys_user</p>
                        <p><strong>Description:</strong> Retrieve user information and profiles</p>
                        <button class="btn-primary" onclick="fetchUsers()">Load Users</button>
                        <div id="user-results" class="api-results"></div>
                    </div>

                    <div class="api-endpoint">
                        <h4>üîß Configuration Items</h4>
                        <p><strong>GET:</strong> /api/now/table/cmdb_ci</p>
                        <p><strong>Description:</strong> Retrieve configuration items and assets</p>
                        <button class="btn-primary" onclick="fetchCIs()">Load CIs</button>
                        <div id="ci-results" class="api-results"></div>
                    </div>

                    <div class="api-endpoint">
                        <h4>üìù Change Requests</h4>
                        <p><strong>GET:</strong> /api/now/table/change_request</p>
                        <p><strong>Description:</strong> Retrieve change management records</p>
                        <button class="btn-primary" onclick="fetchChanges()">Load Changes</button>
                        <div id="change-results" class="api-results"></div>
                    </div>
                </div>
            </div>

            <div class="api-section">
                <h3>API Documentation</h3>
                <div class="api-docs">
                    <div class="api-doc-item">
                        <h4>Authentication</h4>
                        <p>ServiceNow APIs use Basic Authentication or OAuth 2.0. Include your credentials in the request headers:</p>
                        <pre><code>Authorization: Basic base64(username:password)
Content-Type: application/json</code></pre>
                    </div>

                    <div class="api-doc-item">
                        <h4>Query Parameters</h4>
                        <p>Use query parameters to filter and sort results:</p>
                        <ul>
                            <li><strong>sysparm_query:</strong> Filter records using encoded queries</li>
                            <li><strong>sysparm_limit:</strong> Limit number of records returned</li>
                            <li><strong>sysparm_offset:</strong> Pagination offset</li>
                            <li><strong>sysparm_fields:</strong> Specify fields to return</li>
                        </ul>
                    </div>

                    <div class="api-doc-item">
                        <h4>Response Format</h4>
                        <p>All API responses are returned in JSON format:</p>
                        <pre><code>{
  "result": [
    {
      "sys_id": "abc123",
      "number": "INC0010001",
      "short_description": "Issue description",
      "state": "1"
    }
  ]
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="api-section">
                <h3>Common Use Cases</h3>
                <div class="use-cases">
                    <div class="use-case">
                        <h4>üîÑ Data Synchronization</h4>
                        <p>Sync ServiceNow data with external systems for reporting and analytics</p>
                        <button class="btn-secondary" onclick="showExample('sync')">View Example</button>
                    </div>

                    <div class="use-case">
                        <h4>üìä Reporting Integration</h4>
                        <p>Pull ServiceNow data into business intelligence tools and dashboards</p>
                        <button class="btn-secondary" onclick="showExample('reporting')">View Example</button>
                    </div>

                    <div class="use-case">
                        <h4>ü§ñ Automation</h4>
                        <p>Automate ticket creation and updates using webhooks and API calls</p>
                        <button class="btn-secondary" onclick="showExample('automation')">View Example</button>
                    </div>

                    <div class="use-case">
                        <h4>üì± Mobile Integration</h4>
                        <p>Integrate ServiceNow with mobile applications for field service</p>
                        <button class="btn-secondary" onclick="showExample('mobile')">View Example</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <style>
        .api-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .api-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .api-endpoints {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .api-endpoint {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            background: #f8f9fa;
        }

        .api-endpoint h4 {
            color: #2563eb;
            margin-bottom: 1rem;
        }

        .api-endpoint p {
            margin-bottom: 0.5rem;
        }

        .api-results {
            margin-top: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border: 1px solid #dee2e6;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .api-docs {
            display: grid;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .api-doc-item {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            background: #f8f9fa;
        }

        .api-doc-item h4 {
            color: #2563eb;
            margin-bottom: 1rem;
        }

        .api-doc-item pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .api-doc-item code {
            font-family: 'Courier New', monospace;
        }

        .use-cases {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .use-case {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            background: #f8f9fa;
            text-align: center;
        }

        .use-case h4 {
            color: #2563eb;
            margin-bottom: 1rem;
        }

        .use-case p {
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .api-endpoints {
                grid-template-columns: 1fr;
            }
            
            .use-cases {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <script>
        function fetchIncidents() {
            const resultsDiv = document.getElementById('incident-results');
            resultsDiv.innerHTML = 'Loading incidents...';
            
            // Simulate API call
            setTimeout(() => {
                const mockData = [
                    { number: 'INC0010001', short_description: 'Printer not working', state: '1', priority: '2' },
                    { number: 'INC0010002', short_description: 'Email access issue', state: '2', priority: '1' },
                    { number: 'INC0010003', short_description: 'Software installation request', state: '1', priority: '3' }
                ];
                
                resultsDiv.innerHTML = JSON.stringify(mockData, null, 2);
            }, 1000);
        }

        function fetchUsers() {
            const resultsDiv = document.getElementById('user-results');
            resultsDiv.innerHTML = 'Loading users...';
            
            setTimeout(() => {
                const mockData = [
                    { name: 'John Smith', email: 'john.smith@asics.com', department: 'IT' },
                    { name: 'Jane Doe', email: 'jane.doe@asics.com', department: 'Finance' },
                    { name: 'Mike Johnson', email: 'mike.johnson@asics.com', department: 'Marketing' }
                ];
                
                resultsDiv.innerHTML = JSON.stringify(mockData, null, 2);
            }, 1000);
        }

        function fetchCIs() {
            const resultsDiv = document.getElementById('ci-results');
            resultsDiv.innerHTML = 'Loading configuration items...';
            
            setTimeout(() => {
                const mockData = [
                    { name: 'Server-001', type: 'Server', status: 'In Production' },
                    { name: 'Printer-002', type: 'Printer', status: 'In Production' },
                    { name: 'Switch-003', type: 'Network Device', status: 'In Production' }
                ];
                
                resultsDiv.innerHTML = JSON.stringify(mockData, null, 2);
            }, 1000);
        }

        function fetchChanges() {
            const resultsDiv = document.getElementById('change-results');
            resultsDiv.innerHTML = 'Loading change requests...';
            
            setTimeout(() => {
                const mockData = [
                    { number: 'CHG0010001', short_description: 'Server maintenance', state: '3', risk: 'Low' },
                    { number: 'CHG0010002', short_description: 'Software upgrade', state: '2', risk: 'Medium' },
                    { number: 'CHG0010003', short_description: 'Network configuration', state: '1', risk: 'High' }
                ];
                
                resultsDiv.innerHTML = JSON.stringify(mockData, null, 2);
            }, 1000);
        }

        function showExample(type) {
            let message = '';
            switch(type) {
                case 'sync':
                    message = 'Example: Use scheduled API calls to sync incident data with external ticketing systems every 15 minutes.';
                    break;
                case 'reporting':
                    message = 'Example: Pull daily incident metrics into Power BI for executive dashboards and trend analysis.';
                    break;
                case 'automation':
                    message = 'Example: Use webhooks to automatically create ServiceNow tickets when monitoring systems detect issues.';
                    break;
                case 'mobile':
                    message = 'Example: Mobile app uses API to allow field technicians to update incident status and add work notes.';
                    break;
            }
            alert(message);
        }
    </script>
</body>
</html>
